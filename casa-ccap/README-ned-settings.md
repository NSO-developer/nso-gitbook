# NED settings details
----------------------

  This NED is equipped with a number of runtime configuration options "NED settings" allowing for
  customization by the end user. All options are configurable using the NSO API for NED settings.
  Most NED settings can be configured globally, per device profile or per device instance in the
  following locations:

  global
    /ncs:devices/global-settings/ned-settings/casa-ccap/
  profile
    /ncs:devices/ncs:profiles/profile:<name>/ned-settings/casa-ccap/
  device
    /ncs:/device/devices/device:<name>/ned-settings/casa-ccap/

  Profiles setting overrides global-settings and device settings override profile settings,
  hence the narrowest scope of the setting is used by the device.

  If user changes a ned-setting, then user must reconnect to the device, i.e.
  disconnect and connect in order for the new setting to take effect.

  From the NSO CLI the device instance NED settings for this NED are available under:

   ```
   # config
   # devices device dev-1 ned-settings casa-ccap

   Press TAB to see all the NED settings.

   ```


# Table of contents
-------------------

  ```
  1. ned-settings casa-ccap
  2. meta-data
  3. proxy
  4. live-status
     4.1. auto-prompts
  5. developer
  6. connection
  7. get-device-config-settings
  8. apply-device-config-settings
  9. behaviour
     9.1. config-abort-warning
  10. logger
  ```


# 1. ned-settings casa-ccap
---------------------------


    - casa-ccap persist <true|false> (default true)

      this option will disable the 'copy running config to start up config' command that's issued
      after commit.


    - casa-ccap trans-id-method <enum> (default config-hash)

      Configure how the NED shall calculate the transaction id. Typically used after each commit and
      for check-sync operations.

      config-hash              - Use a snapshot of the running config for calculation.(default).

      rollback-timestamp       - Use the time stamp of the latest rollback checkpoint for
                                 calculation. The system rollback feature must be on.

      last-modified-timestamp  - Use the 'time last modified' time stamp generated by the ALU device
                                 for calculation. Note, this time stamp is not available on all ALU
                                 devices. See README.

      last-saved-timestamp     - Use the 'time last saved' time stamp generated by the ALU device
                                 for calculation. Note, this method is not reliable. See README.


    - casa-ccap candidate-commit <enum> (default disabled)

      Make the NED use the candidate commit feature available on some ALU devices.

      disabled  - Apply configuration the standard way, one-by-one. (default).

      enabled   - Apply configuration into a candidate and then commit it.The candidate feature must
                  be enabled on the device.


    - casa-ccap extended-parser <enum> (default auto)

      Make the cisco-aireos NED handle CLI parsing (i.e. transform the running-config from the
      device to the model based config tree).

      disabled        - Load configuration the standard way.

      turbo-mode      - The NED executes the whole command parsing by itself, completely bypassing
                        the NSO CLI parser. The configuration dump is transferred to NSO using maapi
                        setvalues call.

      turbo-xml-mode  - The NED executes the whole command parsing by itself, completely bypassing
                        the NSO CLI parser. The configuration dump is transferred to NSO in XML
                        format.

      robust-mode     - Makes the NED filter the configuration so that unmodeled content is removed
                        before being passed to the NSO CLI-engine. This protects against
                        configuration ending up at the wrong level when NSO CLI parser fallbacks
                        (which potentially can cause following config to be skipped).

      auto            - Uses turbo-mode when available, will use fastest availablemethod to load
                        data to NSO. If NSO doesn't support data-loading from CLI NED, robust-mode
                        is used.


    - casa-ccap number-of-lines-to-send-in-chunk <uint8> (default 100)

      Number of commands lines in a chunk sent by the casa-ccap NED to the device. Default is 100. A
      higher number normally result in better performance but will also have negative impact on the
      error handling. This command does also control the chunk sizes  used in partial show bulk
      mode.


    - casa-ccap partial-show-method <enum> (default bulk-mode)

      Method to use when executing a partial show on the device (for instance when doing a 'commit
      no-overwrite').

      bulk-mode    - The NED executes in a bulk mode fashion. Commands to display config on the
                     requested locations on the device are sent in chunks to minimize the round trip
                     time. The result is gathered when all commands have been sent to the device.
                     (default).

      walk-mode    - The NED walks the config tree on the device step by step and extracts the
                     config on the requested locations. This method is much slower than bulk mode
                     but can be an alternative for devices that are not able to handle chunks of
                     commands properly.

      filter-mode  - The NED fetches a full configuration dump from the device. It then filters out
                     everything except the requested the parts. The filtered config is then sent
                     back to NSO.
Note this method is always used when connected to a NETSIM device.


# 2. ned-settings casa-ccap meta-data
-------------------------------------

  Configure how the NED shall operate on the meta-data tags used in the YANG model.


    - meta-data shutdown-before-set <enum> (default enabled)

      This operation makes the NED shutdown a parent before (given by path) setting the value of
      this leaf. Enabled by default.

      enabled   - enabled.

      disabled  - disabled.


    - meta-data redeploy <enum> (default enabled)

      This operation makes the NED redeploy another leaf (given by path) after setting the value of
      this leaf. Enabled by default.

      enabled   - enabled.

      disabled  - disabled.


# 3. ned-settings casa-ccap proxy
---------------------------------

  Configure NED to access device via a proxy.


    - proxy remote-connection <enum>

      Connection type between proxy and device.

      ssh     - ssh.

      telnet  - telnet.

      serial  - serial.


    - proxy remote-address <union>

      Address of host behind the proxy.


    - proxy remote-port <uint16>

      Port of host behind the proxy.


    - proxy remote-name <string>

      User name on the device behind the proxy.


    - proxy remote-password <string>

      Password on the device behind the proxy.


    - proxy proxy-prompt <string>

      Prompt pattern on the proxy host.


    - proxy remote-ssh-args <string>

      Additional arguments used to establish proxy connection.


# 4. ned-settings casa-ccap live-status
---------------------------------------

  Configure NED settings related to live-status.


    - live-status time-to-live <int32> (default 50)

      Define time-to-live for data fetched from the device via live-status.(default 50).


## 4.1. ned-settings casa-ccap live-status auto-prompts
-------------------------------------------------------

  Pre-stored answers to device prompting questions.

    - live-status auto-prompts <id> <question> <answer>

      - id <WORD>

        List id, any string.

      - question <WORD>

        Device question, regular expression.

      - answer <WORD>

        Answer to device question.


# 5. ned-settings casa-ccap developer
-------------------------------------

  Contains settings used by the NED developers.


    - developer load-from-file <string>

      Make the NED load a file containing raw device config when doing sync-from. Does only work on
      NETSIM targets.


    - developer model <uint32>

      Simulate a model number.


    - developer version <uint8>

      Simulate a version number.


    - developer device-type <enum> (default netsim)

      Real or simulated device.

      netsim  - netsim.

      device  - device.


    - developer progress-verbosity <enum> (default debug)

      Maximum NED verbosity level which will get written in devel.log file.

      disabled      - disabled.

      normal        - normal.

      verbose       - verbose.

      very-verbose  - very-verbose.

      debug         - debug.


    - developer platform model <string>

      Override device model name/number.


    - developer platform name <string>

      Override device name.


    - developer platform version <string>

      Override device version.


    - developer trace-enable <true|false> (default false)

      Enable developer tracing. WARNING: may choke NSO with large commits|systems.


    - developer trace-timestamp <true|false> (default false)

      Add timestamp from NED instance in trace messages for debug purpose.


    - developer sync-from-verbose <enum> (default brief)

      Set info level for sync-from verbose output.

      brief  - brief.

      full   - full.


# 6. ned-settings casa-ccap connection
--------------------------------------

  Configure settings specific to the connection between NED and device.


    - connection connector <WORD>

      Change the default connector. Default 'ned-connector-default.json'.


    - connection ssh client <enum> (default ganymed)

      Configure the SSH client to use. Relevant only when using the NED with NSO 5.6 or later.

      ganymed  - The legacy SSH client. Used on all older versions of NSO.

      sshj     - The new SSH client with support for the latest crypto features. This is the default
                 when using the NED on NSO 5.6 or later.


    - connection ssh host-key known-hosts-file <string>

      Path to openssh formatted 'known_hosts' file containing valid host keys.


    - connection ssh host-key public-key-file <string>

      Path to openssh formatted public (.pub) host key file.


    - connection ssh auth-key private-key-file <string>

      Path to openssh formatted private key file.


    - connection number-of-retries <uint8> (default 0)

      Configure max number of retries the NED will try to connect to the device before giving up.
      Default 0.


    - connection time-between-retry <uint8> (default 1)

      Configure the time in seconds the NED will wait between each connect retry. Default 1s.


# 7. ned-settings casa-ccap get-device-config-settings
------------------------------------------------------

  Configure how the NED shall read config from the device.


    - get-device-config-settings method <enum> (default cli)

      The method to use.

      cli            - Dump the running config using the 'admin display-config' CLI command
                       (default).

      sftp-transfer  - Transfer the latest saved config from the device via the SFTP protocol. Note
                       that this method is not reliable. The latest saved config is not necessarily
                       the same as the running config. A NED configured for this will not be able to
                       detect out of band changes that have not been saved to file yet.


    - get-device-config-settings file <string>

      The name of the file containing latest saved config.


    - get-device-config-settings save-running-config-first <enum>

      Make the NED automatically save the running config to the specified file before starting the
      SFTP transfer.

      enabled   - enabled.

      disabled  - disabled.


# 8. ned-settings casa-ccap apply-device-config-settings
--------------------------------------------------------

  Configure how the NED shall write config to the device.


    - apply-device-config-settings method <enum> (default cli)

      The method to use.

      cli            - Configure through the CLI (default).

      sftp-transfer  - Transfer as file to the device via the SFTP protocol. Then apply the config
                       using the 'exec' command on the device.


    - apply-device-config-settings file <string> (default cf3:casa-ccap-tmp.cfg)

      The name of the temporary file to use when transferring the config (default:
      'cf3:casa-ccap-tmp.cfg'.


# 9. ned-settings casa-ccap behaviour
-------------------------------------

  NED specific behaviours.


## 9.1. ned-settings casa-ccap behaviour config-abort-warning
-------------------------------------------------------------

  Configure additional device warnings that shall be treated as errors and trigger an abort in the
  NED. Enter as a regex.

    - behaviour config-abort-warning <warning>

      - warning <string>

        Warning regular expression, e.g. .*interface.* does not exist.*.


# 10. ned-settings casa-ccap logger
-----------------------------------

  Settings for controlling logs generated.


    - logger level <enum> (default info)

      Set level of logging.

      error    - error.

      info     - info.

      verbose  - verbose.

      debug    - debug.


    - logger java <true|false> (default true)

      Toggle logs to be added to ncs-java-vm.log.


